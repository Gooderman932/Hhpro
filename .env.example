# =====================================================
# Construction Intelligence Platform - Environment Configuration
# =====================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# =====================================================
# APPLICATION SETTINGS
# =====================================================
APP_NAME="BuildIntel Pro"
APP_VERSION="1.0.0"
ENVIRONMENT="development"  # development | staging | production
DEBUG=true

# =====================================================
# API CONFIGURATION
# =====================================================
API_V1_PREFIX="/api/v1"
SECRET_KEY="your-secret-key-change-this-to-random-string-in-production"
ALGORITHM="HS256"
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =====================================================
# DATABASE
# =====================================================
# PostgreSQL connection string
DATABASE_URL="postgresql://buildintel_user:your_password@localhost:5432/buildintel_db"
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=40

# For production with SSL:
# DATABASE_URL="postgresql://user:password@host:5432/dbname?sslmode=require"

# =====================================================
# REDIS CACHE
# =====================================================
REDIS_URL="redis://localhost:6379/0"
CACHE_TTL=3600  # seconds

# For production with password:
# REDIS_URL="redis://:password@host:6379/0"

# =====================================================
# OPENAI API (for ML services)
# =====================================================
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY="sk-proj-your-openai-api-key-here"
OPENAI_MODEL="gpt-4o"  # gpt-4o | gpt-4o-mini | gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL="text-embedding-3-small"  # or text-embedding-3-large

# =====================================================
# DATA SOURCES
# =====================================================
# Permits API (e.g., BuildingConnected, Dodge, local gov APIs)
PERMITS_API_URL="https://api.permits-provider.com/v1"
PERMITS_API_KEY="your-permits-api-key"

# Tenders/Bids API
TENDERS_API_URL="https://api.tenders-provider.com/v1"
TENDERS_API_KEY="your-tenders-api-key"

# News API (e.g., NewsAPI, construction-specific feeds)
NEWS_API_URL="https://newsapi.org/v2"
NEWS_API_KEY="your-news-api-key"

# Web scraping settings
SCRAPING_USER_AGENT="BuildIntelBot/1.0 (+https://yourcompany.com/bot)"
SCRAPING_RATE_LIMIT=2  # requests per second

# =====================================================
# MACHINE LEARNING
# =====================================================
MODEL_PATH="./models"
MIN_CONFIDENCE_THRESHOLD=0.7

# Feature flags for ML services
ENABLE_WIN_PROBABILITY=true
ENABLE_DEMAND_FORECAST=true
ENABLE_ENTITY_EXTRACTION=true
ENABLE_PROJECT_CLASSIFICATION=true
ENABLE_SEMANTIC_SEARCH=true

# ML Processing
ML_BATCH_SIZE=100
ML_USE_LLM_BY_DEFAULT=false  # Set to true to use LLM for all classifications

# =====================================================
# MULTI-TENANCY
# =====================================================
ENABLE_MULTI_TENANT=true
MAX_USERS_PER_TENANT=50
MAX_PROJECTS_PER_TENANT_FREE=100
MAX_PROJECTS_PER_TENANT_PRO=1000
MAX_PROJECTS_PER_TENANT_ENTERPRISE=0  # 0 = unlimited

# =====================================================
# RATE LIMITING
# =====================================================
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000

# API Credits (per operation)
CREDIT_COST_CLASSIFICATION_RULE=1
CREDIT_COST_CLASSIFICATION_ML=5
CREDIT_COST_CLASSIFICATION_LLM=10
CREDIT_COST_WIN_PROBABILITY=10
CREDIT_COST_DEMAND_FORECAST=50
CREDIT_COST_SEMANTIC_SEARCH=5

# =====================================================
# MONITORING & LOGGING
# =====================================================
LOG_LEVEL="INFO"  # DEBUG | INFO | WARNING | ERROR | CRITICAL

# Sentry for error tracking (optional)
SENTRY_DSN=""
SENTRY_ENVIRONMENT="development"
SENTRY_TRACES_SAMPLE_RATE=0.1

# =====================================================
# CORS (Cross-Origin Resource Sharing)
# =====================================================
CORS_ORIGINS="http://localhost:3000,http://localhost:5173,https://app.yourcompany.com"

# =====================================================
# FILE UPLOAD
# =====================================================
MAX_UPLOAD_SIZE=10485760  # 10MB in bytes
ALLOWED_UPLOAD_EXTENSIONS=".pdf,.csv,.xlsx,.json,.docx"
UPLOAD_STORAGE_PATH="./uploads"

# Cloud storage (optional - for production)
# AWS_S3_BUCKET=""
# AWS_ACCESS_KEY_ID=""
# AWS_SECRET_ACCESS_KEY=""
# AWS_REGION="us-east-1"

# =====================================================
# EMAIL (for notifications, password resets)
# =====================================================
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_USER="your-email@gmail.com"
SMTP_PASSWORD="your-app-specific-password"
SMTP_FROM_EMAIL="noreply@yourcompany.com"
SMTP_FROM_NAME="BuildIntel Pro"

# For production, use SendGrid, Mailgun, or AWS SES:
# SENDGRID_API_KEY=""
# MAILGUN_API_KEY=""

# =====================================================
# SSO / AUTHENTICATION
# =====================================================
# Google OAuth
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""
GOOGLE_REDIRECT_URI="http://localhost:8000/api/v1/auth/google/callback"

# Microsoft Azure AD
AZURE_CLIENT_ID=""
AZURE_CLIENT_SECRET=""
AZURE_TENANT_ID=""
AZURE_REDIRECT_URI="http://localhost:8000/api/v1/auth/azure/callback"

# Okta
OKTA_DOMAIN=""
OKTA_CLIENT_ID=""
OKTA_CLIENT_SECRET=""
OKTA_REDIRECT_URI="http://localhost:8000/api/v1/auth/okta/callback"

# =====================================================
# STRIPE PAYMENTS (for subscriptions)
# =====================================================
STRIPE_PUBLIC_KEY="pk_test_your_stripe_public_key"
STRIPE_SECRET_KEY="sk_test_your_stripe_secret_key"
STRIPE_WEBHOOK_SECRET="whsec_your_webhook_secret"

# Price IDs for subscription tiers
STRIPE_PRICE_ID_PROFESSIONAL="price_professional_monthly"
STRIPE_PRICE_ID_ENTERPRISE="price_enterprise_monthly"

# =====================================================
# FEATURE FLAGS
# =====================================================
ENABLE_WHITE_LABEL=true
ENABLE_API_ACCESS=true
ENABLE_EXPORTS=true
ENABLE_WEBHOOKS=true
ENABLE_CUSTOM_REPORTS=true

# Beta features
ENABLE_SCENARIO_ANALYSIS=false
ENABLE_RISK_SCORING=false
ENABLE_CARBON_TRACKING=false

# =====================================================
# BACKGROUND JOBS
# =====================================================
# Celery (for async tasks) - optional
CELERY_BROKER_URL="redis://localhost:6379/1"
CELERY_RESULT_BACKEND="redis://localhost:6379/2"

# Job schedules (cron format)
SCHEDULE_MODEL_RETRAINING="0 2 * * 0"  # Sunday 2 AM
SCHEDULE_FORECAST_UPDATE="0 3 * * 1"   # Monday 3 AM
SCHEDULE_DATA_SCRAPING="0 */6 * * *"   # Every 6 hours
SCHEDULE_CLEANUP_OLD_DATA="0 4 * * 0"  # Sunday 4 AM

# =====================================================
# SECURITY
# =====================================================
# Password requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGIT=true
PASSWORD_REQUIRE_SPECIAL=false

# Session security
SESSION_COOKIE_SECURE=false  # Set to true in production (HTTPS)
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE="lax"

# IP whitelist (optional - comma separated)
IP_WHITELIST=""

# =====================================================
# ANALYTICS & TRACKING
# =====================================================
# Google Analytics
GA_TRACKING_ID=""

# Mixpanel
MIXPANEL_TOKEN=""

# PostHog
POSTHOG_API_KEY=""
POSTHOG_HOST="https://app.posthog.com"

# =====================================================
# ADMIN SETTINGS
# =====================================================
# Super admin email (for initial setup)
ADMIN_EMAIL="admin@yourcompany.com"
ADMIN_PASSWORD="change-this-secure-password"

# Support contact
SUPPORT_EMAIL="support@yourcompany.com"
SUPPORT_PHONE="+1-555-123-4567"

# =====================================================
# DEPLOYMENT
# =====================================================
# Application URLs
FRONTEND_URL="http://localhost:3000"
BACKEND_URL="http://localhost:8000"
API_DOCS_URL="http://localhost:8000/api/docs"

# For production:
# FRONTEND_URL="https://app.yourcompany.com"
# BACKEND_URL="https://api.yourcompany.com"

# Health check endpoint
HEALTH_CHECK_PATH="/health"

# =====================================================
# DEVELOPMENT TOOLS
# =====================================================
# Enable development features
ENABLE_API_DOCS=true
ENABLE_SWAGGER_UI=true
ENABLE_REDOC=true
ENABLE_SQL_ECHO=false  # Set to true to see all SQL queries

# Test database (for running tests)
TEST_DATABASE_URL="postgresql://test_user:test_pass@localhost:5432/buildintel_test"

# =====================================================
# CUSTOM SETTINGS (add your own)
# =====================================================
# Company-specific settings
COMPANY_NAME="Your Company Name"
COMPANY_LOGO_URL="https://yourcompany.com/logo.png"
COMPANY_WEBSITE="https://yourcompany.com"

# Regional settings
DEFAULT_COUNTRY="USA"
DEFAULT_CURRENCY="USD"
DEFAULT_TIMEZONE="America/New_York"
DEFAULT_LANGUAGE="en"

# Business rules
DEFAULT_WIN_PROBABILITY_THRESHOLD=0.7
DEFAULT_OPPORTUNITY_SCORE_THRESHOLD=0.6
FORECASTING_PERIODS_DEFAULT=6

# Data retention
DATA_RETENTION_DAYS=730  # 2 years
ARCHIVE_OLD_PROJECTS=true
ARCHIVE_AFTER_DAYS=365
